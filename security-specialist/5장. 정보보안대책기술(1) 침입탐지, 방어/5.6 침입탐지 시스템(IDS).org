#+TITLE: 침입탐지시스템 (IDS)

* 침입탐지 시스템의 개요
- 실제 공격을 탐지하는 시스템
- 1000개 넘는 패턴이 등록되어 있는 것이 보통
- 파이어월은 접근 제어가 주 목적이고, 파이어월 로그의 양은 엄청나게 방대할 뿐더라 얻을 수 있는 정보가 중계/차단한 패킷의 정보정도 이다. 따라서, 파이어월 로그로는 공격을 탐지하는 것이 거의 불가능하다.


* IDS의 종류와 주요한 기능
** 네트워크 형 침입탐지시스템(NIDS)
*** 접속장소와 감시방법
**** 배리어 세그먼트 (파이어월을 지나기 전의 세그먼트)
- 인터넷으로부터 자신의 사이트에 어떤 공격이 수행되고 있는지 알 수 있다. 
- 하지만 실제로는 많은 공격이 파이어월에 의해 차단되기 때문에 DMZ에 설치된 IDS 로그와의 비교를 통해서만 실제 영향을 미치는 공격을 특정할 수 있다. 
- 따라서, DMZ에서 감사를 하지 않는다면 이 구성은 의미가 없다. 

**** DMZ에 접속
- 파이어월을 지나서 DMZ대해 수행되는 공격을 탐지할 수 있다. 
- 가장 중요한 위치
- 한대만 설치해야 한다면 여기에 설치한다.
- 파이어월이 인터넷에서  DMZ로 중계하고 있는 (DMZ에서 서비스하고 있는)프로토콜과, DMZ에서 인터넷으로 중계하고 있는 프로토콜에 관한 시그니쳐를 감시대상으로 설정하면 된다.

**** 내부 세그먼트에 접속
- LAN을 흘러다니는 부정 패킷을 탐지할 수 있다. 
- 최근 멀웨어의 확산이 문제가 되고 있는데 주로 부정한 사이트에 접속하거나 외부에서 가지고온 노트 PC가 원인이 되고 있다. 
- 내부 세그먼트에 NIDS를 접속해서 운영하는 것으로 이러한 사태를 빠르게 알아챌 수 있다. 

*** 공격이나 부정 접근을 탐지하는 구조
크게 다음 두 가지의 방식이 있다. 

**** 시그니쳐 패턴매칭
패킷과 NIDS에 등록된 방대한 수의 시그니처와 비교해서 부정접근을 탐지하는 방법

다음 공격을 탐지할 수 있다. 
- 포트 스캔
- 취약점 검사 툴에 의한 스캔
- OS나 서버 SW의 알려진 취약점을 악용한 공격
- 서버에 대한 부정 커맨드 실행
- 네트워크를 통해 이루어지는 패스워드 크래킹
- 패킷을 위조한 DoS공격

패턴매칭 방식의 운용상 유의점은 다음과 같다. 
- 시그니쳐를 항상 새로운 상태로 할 것
- 미지의 공격은 탐지할 수 없다.
- 사이트 독자 어플리케이션의 취약점을 이용한 공격은 탐지불가능

**** 이상 탐지(어노말리 탐지)
정상 패턴(RFC 프로토콜 사양 등의)을 등록해두고, 이 패턴에 맞지 않는 것을 이상 패턴으로 탐지

다음 공격을 탐지할 수 있다. 
- 대량으로 발생한 커맨드
- 프로토콜의 사양에 반하는 데이터흐름
- 프로토콜의 사양에 맞지 않는 헤더 정보 패킷
- 이상 수의 응답 패킷

정상 상태의 판단기준에 따라 오보가 많을 수도 있음을 염두해야 한다.

*** 이벤트 탐지 후의 액션 기능
상세는 책 참조

파이어월의 ACL을 동적으로 변경해서 방어하는 것도 된다는 점 (NIDS)

*** NIDS 의 세션차단 기능



** 호스트 형 침입탐지 시스템(HIDS)

** NIDS와 HIDS 의 비교


* IDS의 구성 예
** DMZ와 내부 세그먼트를 감시

** 스위치 접속


** TAP 접속

** LB 접속
*SSL 악셀레이터*



* IDS 도입 상의 유의점
** NIDS, HIDS 공통 항목

** NIDS

** HIDS


* IDS의 기능상의 한계 및 운용상의 과제
** NIDS의 기능상의 한계와 운용상의 과제
*** 오탐지 대응

*** NIDS의 처리능력부족에 의한 패킷 유실

*** 어플리케이션에 대한 공격을 탐지하지 못함

*** 일부의 고성능 기종을 빼고는 암호화된 패킷을 해석할 수 없음

*** 공격을 탐지해도 침입을 탐지못함

*** 부정접근을 방어할 수 없음

*** 부정한 권한자에 의한 내부 범죄는 탐지가 곤란

*** IT(특히 네트워크 기술)의 발전에 맞춘 기능확장이 필요

** HIDS의 기능상의 한계와 운용상의 과제
*** 어디까지는 OS의 기본적인 기능이 베이스로, 그 이상의 기능은 할 수없다.

*** 하나의 HIDS로 감시가 되는 것은 한대의 호스트뿐이다.

*** 도입에 의해 감시대상 호스트의 성능이나 가용성에 악영향을 끼칠 가능성이 있다. 

*** 공격의 전조를 탐지하기가 곤란

*** 정당한 권한자에 의한 내부범죄는 탐지가 곤란

*** 호스트 환경에서 리얼타임 탐지의 필요성이 낮음


* IDS의 확장 기능
** 독자 시그니처 등록 기능

** 취약점 탐에 의한 탐지품질향상

** 세션정보 저장, 분석에 의한 탐지 품질 향상

** 멀티 인터페이스 모니터링 기능

** SSL/TLS에 의해 암호화된 패킷 복호화

** 하이퍼포먼스, 하이어베일러빌리티, 멀티 프로토콜 대응


